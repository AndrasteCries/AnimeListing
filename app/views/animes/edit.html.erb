<div class="anime">
  <div class="anime__container">
    <div class="anime__body">
      <h1>Edit Anime</h1>

      <%= form_with(model: @anime, local: true) do |form| %>
        <% if @anime.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@anime.errors.count, "error") %> prohibited this anime from being saved:</h2>

            <ul>
              <% @anime.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="input-box">
          <%= form.label :name %>
          <%= form.text_field :name, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :description %>
          <%= form.text_area :description, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :episodes %>
          <%= form.number_field :episodes, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :duration %>
          <%= form.number_field :duration, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :score %>
          <%= form.number_field :score, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :popularity %>
          <%= form.number_field :popularity, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :rating %>
          <%= form.number_field :rating, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :yrating %>
          <%= form.number_field :yrating, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :studio_id %>
          <%= form.number_field :studio_id, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :status %>
          <%= form.select :status, Anime.statuses.keys.map { |status| [status.capitalize, status] }, {}, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :title_image %>
          <%= form.file_field :title_image, class: "input" %>
        </div>

        <div class="input-box">
          <%= form.label :tags, "Select Tags" %><br>
          <% @tags.each do |tag| %>
            <%= check_box_tag "anime[tag_ids][]", tag.id, @anime.tags.include?(tag), id: "tag_#{tag.id}" %>
            <%= label_tag "tag_#{tag.id}", tag.name %><br>
          <% end %>
        </div>

        <div class="input-box">
          <%= form.label :types, "Select Types" %><br>
          <% @types.each do |type| %>
            <%= check_box_tag "anime[type_ids][]", type.id, @anime.types.include?(type), id: "type_#{type.id}" %>
            <%= label_tag "type_#{type.id}", type.name %><br>
          <% end %>
        </div>

        <div class="input-box">
          <%= form.label :genres, "Select Genres" %><br>
          <% @genres.each do |genre| %>
            <%= check_box_tag "anime[genre_ids][]", genre.id, @anime.genres.include?(genre), id: "genre_#{genre.id}" %>
            <%= label_tag "genre_#{genre.id}", genre.name %><br>
          <% end %>
        </div>

        <div class="actions">
          <%= form.submit %>
        </div>
      <% end %>

      <%= link_to 'Show', @anime %> |
      <%= link_to 'Back', animes_path %>
    </div>
  </div>
</div>
